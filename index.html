<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Atopic Dermatitis Healthcare</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; line-height:1.6; }
    iframe { width: 100%; height: 600px; border: 1px solid #ccc; border-radius:8px; margin-top:20px; }
    html { scroll-behavior: smooth; }

    /* Tabs container */
    .tabs { display:flex; border-bottom:2px solid #ccc; margin-bottom:20px; }
    .tab-button { flex:1; padding:12px; cursor:pointer; border:none; font-size:16px; transition: background 0.3s, color 0.3s; color:#2f2f2f; }
    .tab-button:nth-child(1) { background-color:#cdb4db; color:#4a3d52; }
    .tab-button:nth-child(1).active { background-color:#b39bc8; color:#2f2538; font-weight:bold; }
    .tab-button:nth-child(2) { background-color:#a2d2ff; color:#26496e; }
    .tab-button:nth-child(2).active { background-color:#7bbdff; color:#1b3550; font-weight:bold; }

    .tab-content { display:none; padding:20px; border:1px solid #ccc; border-top:none; border-radius:0 0 8px 8px; background-color:#fff; }
    .tab-content.active { display:block; }
    #section1.active { background-color:#f2e9f7; }
    #section2.active { background-color:#eaf4ff; }
    .highlight-tab1 { color:#4a3d52; font-weight:bold; }
    .highlight-tab2 { color:#26496e; font-weight:bold; }

    /* Back to top floating button */
    #backToTop { position:fixed; bottom:30px; right:30px; z-index:99; border:none; border-radius:50%; padding:14px 18px; font-size:18px; cursor:pointer; box-shadow:0px 4px 8px rgba(0,0,0,0.2); display:none; transition: background-color 0.3s ease, transform 0.2s ease; color:white; }
    #backToTop:hover { transform:scale(1.05); }

    /* Option info display */
    #optionInfo { margin-top:20px; padding:16px; border:1px solid #ccc; border-radius:8px; line-height:1.5; display:none; }
    #optionInfo h2 { margin-bottom:8px; color:#4a3d52; }
    #optionInfo p { margin-bottom:12px; font-style:italic; color:#555; }
    #optionInfo div { margin-bottom:10px; }
    #optionInfo div#optionWho { padding:8px; background-color:#eee; border-radius:4px; }

    /* Colored sections */
    .constraints { border:2px solid #e74c3c; background:#fdecea; border-radius:6px; padding:10px; margin-bottom:12px; }
    .benefits { border:2px solid #27ae60; background:#eafaf1; border-radius:6px; padding:10px; margin-bottom:12px; }
    .side-effects { border:2px solid #e67e22; background:#fff5e6; border-radius:6px; padding:10px; margin-bottom:12px; }
    .important { border:2px solid #7f8c8d; background:#f8f9f9; border-radius:6px; padding:10px; margin-bottom:12px; }

    /* Section headers */
    .section-title { font-weight:bold; font-size:1.1em; display:flex; align-items:center; gap:6px; margin-bottom:6px; }
    .constraints .section-title { color:#e74c3c; }
    .benefits .section-title { color:#27ae60; }
    .side-effects .section-title { color:#e67e22; }
    .important .section-title { color:#7f8c8d; }
    .section-title .icon { font-size:1.2em; }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Password prompt
      var password = prompt("Enter the password:");
      if(password !== "SHADOW"){
        document.body.innerHTML = "<h1>Access Denied</h1>";
        return;
      }
      updateBackToTopColor("section1");
      updateChoiceC();
    });

    // Tab switching
    function openTab(evt, tabId){
      const contents = document.getElementsByClassName("tab-content");
      const buttons = document.getElementsByClassName("tab-button");
      for(let i=0;i<contents.length;i++){contents[i].classList.remove("active"); contents[i].setAttribute("aria-hidden","true");}
      for(let i=0;i<buttons.length;i++){buttons[i].classList.remove("active"); buttons[i].setAttribute("aria-selected","false");}
      const selectedSection = document.getElementById(tabId);
      selectedSection.classList.add("active"); selectedSection.setAttribute("aria-hidden","false");
      evt.currentTarget.classList.add("active"); evt.currentTarget.setAttribute("aria-selected","true");
      updateBackToTopColor(tabId);
    }

    // PDF logic
    let currentPDF1='', currentPDF2='';
    function updateAllPDFs(lang){
      switch(lang){
        case 'en': currentPDF1='SHADOW_v4_prep1 en-GB.pdf'; currentPDF2='SHADOW_v4_prep2 en-GB.pdf'; break;
        case 'fr': currentPDF1='SHADOW_v4_prep1.pdf'; currentPDF2='SHADOW_v4_prep2.pdf'; break;
        case 'de': currentPDF1='SHADOW_v4_prep1 de.pdf'; currentPDF2='SHADOW_v4_prep2 de.pdf'; break;
        default: currentPDF1=''; currentPDF2=''; break;
      }
      document.getElementById('pdfViewer1').src=currentPDF1||''; 
      document.getElementById('pdfViewer2').src=currentPDF2||'';
    }
    function downloadPDF1(){ if(!currentPDF1){alert('Please select a country.'); return;} const link=document.createElement('a'); link.href=currentPDF1; link.download=currentPDF1; link.click();}
    function downloadPDF2(){ if(!currentPDF2){alert('Please select a country.'); return;} const link=document.createElement('a'); link.href=currentPDF2; link.download=currentPDF2; link.click();}

    // Back to top
    window.onscroll = function(){
      const btn = document.getElementById("backToTop");
      if(document.body.scrollTop>300 || document.documentElement.scrollTop>300){btn.style.display="block";}else{btn.style.display="none";}
    };
    function backToTop(){ window.scrollTo({top:0, behavior:'smooth'}); }
    function updateBackToTopColor(tabId){
      const btn=document.getElementById("backToTop");
      if(tabId==="section1"){btn.style.backgroundColor="#cdb4db";}
      else if(tabId==="section2"){btn.style.backgroundColor="#a2d2ff";}
    }

    // Choice C logic
    function updateChoiceC(){
      const choiceA = document.getElementById("FirstPriority").value;
      const choiceC = document.getElementById("YesICan");
      const prev = choiceC.value;
      const choiceCOptions = {
        choiceA1:["choiceC1","choiceC3"],
        choiceA2:["choiceC2","choiceC3"],
        choiceA3:["choiceC1","choiceC4"]
      };
      for(let i=0;i<choiceC.options.length;i++){
        const option = choiceC.options[i];
        if(option.value==="choiceC0"){ option.disabled=false; option.hidden=false; }
        else if(choiceCOptions[choiceA]?.includes(option.value)){ option.disabled=false; option.hidden=false; }
        else{ option.disabled=true; option.hidden=true; }
      }
      if(!choiceCOptions[choiceA]?.includes(prev)){ choiceC.value="choiceC0"; }
      updateOptionInfo();
    }

    // Option info mapping
    const optionInfoMapping = {
      "choiceA1_choiceC1": {title:"Oral immunosuppressants", summary:"Sytemic treatments which lower immune response.", who:"Patients willing to make a daily effort to quickly calm symptoms.", constraints:["Tablets or capsules","Limited treatment period", "Medical surveillance","Restricted access"], benefits:["Rapid effectiveness","Visible skin improvement"], sideEffects:["Liver disorders, nausea, fatigue"], important:["Works only while treatment is taken."]},
      "choiceA1_choiceC3": {title:"Topical immunomodulators", summary:"Maintains skin control with strong anti-inflammatory creams.", who:"Patients who need flexibility and portability.", constraints:["Oily ointment","Cosmetic overlay difficult","Limited access"], benefits:["Rapid relief","Caring for atopic skin"], sideEffects:["Irritant effect"], important:["Works only while treatment is taken."]},
      "choiceA2_choiceC2": {title:"Phototherapy", summary:"Reproduces sun effect with safe exposure.", who:"Patients who prefer minimal systemic effects and can travel.", constraints:["Clinic visits","Limited treatment period","Travel required"], benefits:["Very rare systemic effects"], sideEffects:["Hyperpigmentation, redness, dryness"], important:["Only in dermatology practices with special equipment."]},
      "choiceA2_choiceC3": {title:"Topical corticosteroids", summary:"Anti-inflammatory cortisone creams.", who:"Patients who prefer gentle, flexible treatments.", constraints:["Various textures and concentrations","Personalized routine needed"], benefits:["Rare systemic effects","Accessible","Caring for atopic skin"], sideEffects:["Skin fragility, stretch marks"], important:["Finding the best routine may take time."]},
      "choiceA3_choiceC4": {title:"Biological therapies", summary:"Injectable therapy for long-term control.", who:"Patients willing to receive injections for stability.", constraints:["Subcutaneous injections every 2 weeks","Limited hospital access"], benefits:["Gradual reduction in corticosteroids","Long-term stabilization"], sideEffects:["Eye issues, joint pain, infections"], important:["Requires hospital dermatologist consultation."]},
      "choiceA3_choiceC1": {title:"Anti-JAK treatment", summary:"Oral targeted therapy neutralizing inflammation messengers.", who:"Patients preferring daily tablets over injections.", constraints:["Daily tablets","Medical surveillance","Hospital prescription"], benefits:["Long-term symptom reduction","Possible dose spacing"], sideEffects:["Respiratory issues, infections"], important:["Hospital dermatologist required."]}
    };

    function updateOptionInfo(){
      const choiceA = document.getElementById("FirstPriority").value;
      const choiceC = document.getElementById("YesICan").value;
      const key = choiceA+"_"+choiceC;
      const optionDiv = document.getElementById("optionInfo");
      if(optionInfoMapping[key]){
        const info = optionInfoMapping[key];
        document.getElementById("optionTitle").innerText = info.title;
        document.getElementById("optionSummary").innerText = info.summary;
        document.getElementById("optionWhoText").innerText = info.who;
        document.getElementById("optionConstraints").innerHTML = info.constraints.map(i=>`<li>${i}</li>`).join("");
        document.getElementById("optionBenefits").innerHTML = info.benefits.map(i=>`<li>${i}</li>`).join("");
        document.getElementById("optionSideEffects").innerHTML = info.sideEffects.map(i=>`<li>${i}</li>`).join("");
        document.getElementById("optionImportant").innerHTML = info.important.map(i=>`<li>${i}</li>`).join("");
        optionDiv.style.display = "block";
        const colors = { choiceA1:"#fff6ff", choiceA2:"#e9fcff", choiceA3:"#dff1ff" };
        optionDiv.style.backgroundColor = colors[choiceA] || "#f9f9f9";
      } else { optionDiv.style.display = "none"; }
    }
  </script>
</head>
<body>
  <div style="font-size:0.9em;color:#555;margin-bottom:20px;">
    <p>Disclaimer: This website is part of an ongoing project by Henri-Mondor University Hospital (Cr√©teil, France) to develop a Shared Decision Making tool for Atopic Dermatitis patients. For more info contact <a href="mailto:fanny.kpenou@edu.ehesp.fr">fanny.kpenou@edu.ehesp.fr</a>.</p>
  </div>

  <label for="languageSelectAll" style="font-weight:bold;">Choose your country:</label>
  <select id="languageSelectAll" onchange="updateAllPDFs(this.value)">
    <option value="">-- Select Country --</option>
    <option value="en">UK üá¨üáß</option>
    <option value="fr">France üá´üá∑</option>
    <option value="de">Deutschland üá©üá™</option>
  </select>

  <div class="tabs" role="tablist">
    <button class="tab-button active" role="tab" aria-controls="section1" aria-selected="true" onclick="openTab(event,'section1')">What are my treatment options?</button>
    <button class="tab-button" role="tab" aria-controls="section2" aria-selected="false" onclick="openTab(event,'section2')">What should I also consider?</button>
  </div>

  <!-- Section 1 -->
  <div id="section1" class="tab-content active" role="tabpanel" aria-hidden="false">
    <h1>Treatment <span class="highlight-tab1">options</span> according to <span class="highlight-tab1">patients</span>' perspectives</h1>
    <p>Treatment options are outlined according to patient priorities, with benefits and risks described from their perspective, alongside input from dermatologists. You can browse the highlights below, or view/download the <a href="#pdf-section1">full PDF</a>.</p>
    <ul>
      <li>
        <label for="FirstPriority"><strong>What is my number one priority?</strong></label>
        <select id="FirstPriority" onchange="updateChoiceC()">
          <option value="choiceA0">-- Select --</option>
          <option value="choiceA1">Getting rid of lesions and pruritus</option>
          <option value="choiceA2">Fewest possible side effects</option>
          <option value="choiceA3">Stabilize eczema over the long term</option>
        </select>
      </li>
      <li>
        <label for="YesICan"><strong>What can I do for my care?</strong></label>
        <select id="YesICan" onchange="updateOptionInfo()">
          <option value="choiceC0">-- Select --</option>
          <option value="choiceC1">I can take a medicine everyday</option>
          <option value="choiceC2">I can travel regularly for a brief session</option>
          <option value="choiceC3">I can keep a product with me to apply it anytime</option>
          <option value="choiceC4">I can have injections</option>
        </select>
      </li>
    </ul>

    <div id="optionInfo">
      <h2 id="optionTitle"></h2>
      <p id="optionSummary"></p>
      <div id="optionWho"><strong>Who is it for?</strong><p id="optionWhoText"></p></div>
      
      <div class="constraints">
        <div class="section-title"><span class="icon">‚ùó</span>Constraints:</div>
        <ul id="optionConstraints"></ul>
      </div>
      <div class="benefits">
        <div class="section-title"><span class="icon">‚úÖ</span>Benefits:</div>
        <ul id="optionBenefits"></ul>
      </div>
      <div class="side-effects">
        <div class="section-title"><span class="icon">‚ö†Ô∏è</span>Possible side effects:</div>
        <ul id="optionSideEffects"></ul>
      </div>
      <div class="important">
        <div class="section-title"><span class="icon">‚ÑπÔ∏è</span>Important information:</div>
        <ul id="optionImportant"></ul>
      </div>
    </div>

    <div id="pdf-section1">
      <button onclick="downloadPDF1()">Download PDF</button>
      <iframe id="pdfViewer1" src="" frameborder="0" title="Treatment options PDF"></iframe>
    </div>
  </div>

  <!-- Section 2 -->
  <div id="section2" class="tab-content" role="tabpanel" aria-hidden="true">
    <h1>Understanding my disease and its <span class="highlight-tab2">everyday implications</span></h1>
    <p>This guide covers symptoms, overall consequences, daily care routines, and how to manage flare-ups. You can browse the highlights below, or view/download the <a href="#pdf-section2">full PDF</a>.</p>
    <ul>
      <li><strong><span class="highlight-tab2">What is AD?</span></strong> A chronic skin condition causing inflammation and itching.</li>
      <li><strong><span class="highlight-tab2">Common triggers:</span></strong> Cold, stress, allergens, irritants.</li>
      <li><strong><span class="highlight-tab2">Everyday prevention:</span></strong> Moisturizers, lifestyle adjustments.</li>
    </ul>
    <div id="pdf-section2">
      <button onclick="downloadPDF2()">Download PDF</button>
      <iframe id="pdfViewer2" src="" frameborder="0" title="Understanding AD PDF"></iframe>
    </div>
  </div>

  <button id="backToTop" onclick="backToTop()">‚Üë</button>
</body>
</html>

